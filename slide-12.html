<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>When Parallel Trends Fails</title>
  <link rel="stylesheet" href="assets/styles.css">
</head>
<body>
  <div class="slide-container" data-current-slide="12" data-total-slides="22">
    <div class="slide">
      <a href="index.html" class="home-btn" title="Table of Contents">
        <svg viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>
      </a>

      <h2>When Parallel Trends Fails</h2>

      <div class="two-columns" style="gap:2rem;align-items:start;margin-top:1rem">
        <!-- Left column: Violated -->
        <div style="text-align:center">
          <h3 style="color:#D55E00;margin-bottom:0.5rem;font-size:1.1rem">Parallel Trends Violated</h3>
          <svg viewBox="0 0 380 280" width="380" height="280" style="display:block;margin:0 auto">
            <!-- Axes -->
            <line x1="50" y1="15" x2="50" y2="240" stroke="#333" stroke-width="1.5"/>
            <line x1="50" y1="240" x2="365" y2="240" stroke="#333" stroke-width="1.5"/>
            <!-- X ticks -->
            <text x="110" y="258" text-anchor="middle" font-size="12" fill="#333">t=0</text>
            <text x="200" y="258" text-anchor="middle" font-size="12" fill="#333">t=1</text>
            <text x="290" y="258" text-anchor="middle" font-size="12" fill="#333">t=2</text>
            <!-- Treatment line (between t=1 and t=2) -->
            <line x1="200" y1="12" x2="200" y2="235" stroke="#999" stroke-width="1" stroke-dasharray="4,3"/>

            <!-- Control (vermillion): flat-ish trend: 180, 160, 140 -->
            <polyline points="110,180 200,160 290,140" fill="none" stroke="#D55E00" stroke-width="2.5"/>
            <circle cx="110" cy="180" r="4" fill="#D55E00"/>
            <circle cx="200" cy="160" r="4" fill="#D55E00"/>
            <circle cx="290" cy="140" r="4" fill="#D55E00"/>
            <text x="305" y="145" font-size="11" fill="#D55E00" font-weight="600">Control</text>

            <!-- Treatment (green): steeper pre-trend: 170, 120, then jumps to 50 -->
            <polyline points="110,170 200,120 290,50" fill="none" stroke="#009E73" stroke-width="2.5"/>
            <circle cx="110" cy="170" r="4" fill="#009E73"/>
            <circle cx="200" cy="120" r="4" fill="#009E73"/>
            <circle cx="290" cy="50" r="4" fill="#009E73"/>
            <text x="305" y="55" font-size="11" fill="#009E73" font-weight="600">Treatment</text>

            <!-- Counterfactual (treatment continuing steeper pre-trend): 120 -> 70 -->
            <line x1="200" y1="120" x2="290" y2="70" stroke="#009E73" stroke-width="1.5" stroke-dasharray="6,4" opacity="0.4"/>
            <circle cx="290" cy="70" r="3" fill="none" stroke="#009E73" stroke-width="1.5" opacity="0.4"/>

            <!-- Red X to indicate problem -->
            <text x="340" y="22" font-size="28" fill="#D55E00" font-weight="bold">&#x2717;</text>
          </svg>
          <p style="font-size:0.95rem;color:#D55E00;font-weight:600;margin-top:0.3rem">Pre-trends diverge &rarr; DID is biased</p>
        </div>

        <!-- Right column: Holds -->
        <div style="text-align:center">
          <h3 style="color:#009E73;margin-bottom:0.5rem;font-size:1.1rem">Parallel Trends Holds</h3>
          <svg viewBox="0 0 380 280" width="380" height="280" style="display:block;margin:0 auto">
            <!-- Axes -->
            <line x1="50" y1="15" x2="50" y2="240" stroke="#333" stroke-width="1.5"/>
            <line x1="50" y1="240" x2="365" y2="240" stroke="#333" stroke-width="1.5"/>
            <!-- X ticks -->
            <text x="110" y="258" text-anchor="middle" font-size="12" fill="#333">t=0</text>
            <text x="200" y="258" text-anchor="middle" font-size="12" fill="#333">t=1</text>
            <text x="290" y="258" text-anchor="middle" font-size="12" fill="#333">t=2</text>
            <!-- Treatment line -->
            <line x1="200" y1="12" x2="200" y2="235" stroke="#999" stroke-width="1" stroke-dasharray="4,3"/>

            <!-- Control (vermillion): parallel trend: 190, 160, 130 -->
            <polyline points="110,190 200,160 290,130" fill="none" stroke="#D55E00" stroke-width="2.5"/>
            <circle cx="110" cy="190" r="4" fill="#D55E00"/>
            <circle cx="200" cy="160" r="4" fill="#D55E00"/>
            <circle cx="290" cy="130" r="4" fill="#D55E00"/>
            <text x="305" y="135" font-size="11" fill="#D55E00" font-weight="600">Control</text>

            <!-- Treatment (green): same slope pre, then diverges: 150, 120, then 50 (big effect) -->
            <polyline points="110,150 200,120 290,50" fill="none" stroke="#009E73" stroke-width="2.5"/>
            <circle cx="110" cy="150" r="4" fill="#009E73"/>
            <circle cx="200" cy="120" r="4" fill="#009E73"/>
            <circle cx="290" cy="50" r="4" fill="#009E73"/>
            <text x="305" y="55" font-size="11" fill="#009E73" font-weight="600">Treatment</text>

            <!-- Counterfactual (parallel to control): 120 -> 90 -->
            <line x1="200" y1="120" x2="290" y2="90" stroke="#009E73" stroke-width="1.5" stroke-dasharray="6,4" opacity="0.4"/>
            <circle cx="290" cy="90" r="3" fill="none" stroke="#009E73" stroke-width="1.5" opacity="0.4"/>

            <!-- Green check -->
            <text x="340" y="22" font-size="28" fill="#009E73" font-weight="bold">&#x2713;</text>
          </svg>
          <p style="font-size:0.95rem;color:#009E73;font-weight:600;margin-top:0.3rem">Pre-trends are parallel &rarr; DID is credible</p>
        </div>
      </div>

      <p class="fragment" style="text-align:center;font-size:1.1rem;margin-top:1rem;font-weight:600">
        Always check: Do the groups move in parallel <em>before</em> treatment?
      </p>

      <button class="lecture-notes-btn" title="Lecture Notes">
        <svg viewBox="0 0 24 24"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        Lecture Notes
      </button>
      <div class="notes-overlay">
        <div class="notes-modal">
          <button class="notes-close">&times;</button>
          <h3>Lecture Notes: You Can See It Coming</h3>
          <p>When parallel trends are violated, you can often <strong>see the violation in the pre-treatment data</strong>. If the treatment group was already diverging from the control group before treatment occurred, then continued divergence afterward is not surprising&mdash;and is not evidence of a causal effect.</p>
          <p>This is why we look at pre-trends: if I can "predict" the post-treatment divergence just by extrapolating the pre-treatment pattern, then DID will <strong>overestimate</strong> (or misestimate) the treatment effect.</p>
          <div class="example-box">
            <strong>What we want to see is a "surprise."</strong> In the pre-treatment period, the two groups are evolving similarly. Then suddenly, right when treatment occurs, there is a break&mdash;an unexpected divergence. That break is what we interpret as the causal effect.
          </div>
          <p>In contrast, if the data shows a smooth continuation of a pre-existing trend through the treatment date, there is no "surprise" and DID is not credible.</p>
        </div>
      </div>

      <footer class="slide-footer">
        <span class="slide-number" id="slide-number">12 / 22</span>
      </footer>
    </div>
  </div>
  <script src="assets/slides.js"></script>
</body>
</html>
